# SSH Scanner

ä¸€ä¸ªé«˜æ€§èƒ½çš„å±€åŸŸç½‘ SSH æ‰«æå·¥å…·ï¼Œæ”¯æŒå¹¶å‘æ‰«æå’Œå¯†ç /å¯†é’¥è®¤è¯ã€‚

## ä½¿ç”¨åœºæ™¯

æˆ‘åœ¨æˆ‘çš„å±€åŸŸç½‘é‡Œæœ‰50å¤šå°è®¾å¤‡ï¼Œæˆ‘è®°å¾—æˆ‘çš„è®¾å¤‡çš„å¯†ç éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œæˆ‘æ€ä¹ˆæ‰¾åˆ°ä»–ï¼Ÿ
è¿™ä¸ªç¨‹åºå°±æ˜¯åœ¨è¿™ç§æƒ…æ™¯ä¸‹å‡ºç°çš„ã€‚å€Ÿç”± goroutineï¼Œè¿™ä¸ªå·¥ä½œå¯ä»¥è½»æ¾çš„å¹¶å‘å®Œæˆã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ¨ **äº¤äº’å¼ UI**ï¼šä½¿ç”¨ [bubbletea](https://github.com/charmbracelet/bubbletea) æä¾›ç¾è§‚çš„ç»ˆç«¯ç•Œé¢
- ğŸ”„ **å®æ—¶æ‰«æåŠ¨ç”»**ï¼šæ‰«ææ—¶æ˜¾ç¤ºæ—‹è½¬åŠ¨ç”»å’Œè¿›åº¦
- ğŸ“Š **åŠ¨æ€ç»“æœæ˜¾ç¤º**ï¼šå®æ—¶æ˜¾ç¤ºæ‰«æç»“æœï¼Œæ— éœ€ç­‰å¾…æ‰«æå®Œæˆ
- âš¡ **é«˜å¹¶å‘æ‰«æ**ï¼šé»˜è®¤ 500 ä¸ªå¹¶å‘ workerï¼Œå¿«é€Ÿå®Œæˆæ‰«æ
- ğŸ¯ **æ™ºèƒ½é€€å‡º**ï¼šæŒ‰ `q` é”®æˆ– `Ctrl+C` ä¼˜é›…é€€å‡º
- ğŸ” **å¤šç§è®¤è¯æ–¹å¼**ï¼šæ”¯æŒå¯†ç å’Œå…¬é’¥è®¤è¯
- ğŸ“¤ **å¤šç§è¾“å‡ºæ ¼å¼**ï¼šæ”¯æŒ console å’Œ JSON æ ¼å¼

## å®‰è£…

```bash
go build -o scanner .
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# ä½¿ç”¨é»˜è®¤å‚æ•°æ‰«æï¼ˆäº¤äº’å¼ UIï¼‰
./scanner ssh

# æŒ‡å®šç½‘æ®µå’Œ IP èŒƒå›´
./scanner ssh -p 3 -s 1 -e 254

# æŒ‡å®šç”¨æˆ·åå’Œå¯†ç 
./scanner ssh -u root -P mypassword
```

### é«˜çº§é€‰é¡¹

```bash
# æ˜¾ç¤ºè®¤è¯å¤±è´¥çš„ä¸»æœº
./scanner ssh -a

# æ˜¾ç¤ºç½‘ç»œé”™è¯¯çš„ä¸»æœº
./scanner ssh -n

# æ˜¾ç¤ºæ‰€æœ‰è¯¦ç»†ä¿¡æ¯ï¼ˆä½¿ç”¨ä¼ ç»Ÿè¾“å‡ºï¼Œä¸ä½¿ç”¨ bubbletea UIï¼‰
./scanner ssh -v

# å¯ç”¨å…¬é’¥ç™»å½•
./scanner ssh --pubkey

# å¾ªç¯æ£€ç´¢æ¨¡å¼
./scanner ssh -l

# JSON æ ¼å¼è¾“å‡º
./scanner ssh --output-format json
```

### å‚æ•°è¯´æ˜

#### å…¨å±€å‚æ•°

- `-p, --prefix`ï¼šç½‘æ®µï¼Œä¾‹å¦‚ 3 è¡¨ç¤º 192.168.3.xï¼ˆé»˜è®¤ï¼š3ï¼‰
- `-s, --start`ï¼šèµ·å§‹ IP çš„æœ€åä¸€ä½ï¼ˆé»˜è®¤ï¼š1ï¼‰
- `-e, --end`ï¼šç»“æŸ IP çš„æœ€åä¸€ä½ï¼ˆé»˜è®¤ï¼š254ï¼‰
- `--output-format`ï¼šè¾“å‡ºæ ¼å¼ï¼Œå¯é€‰ console æˆ– jsonï¼ˆé»˜è®¤ï¼šconsoleï¼‰
- `-v, --verbose`ï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼ˆç¦ç”¨ bubbletea UIï¼‰

#### SSH å‘½ä»¤å‚æ•°

- `-u, --user`ï¼šSSH ç”¨æˆ·åï¼ˆé»˜è®¤ï¼šrootï¼‰
- `-P, --password`ï¼šSSH å¯†ç ï¼ˆé»˜è®¤ï¼š123456ï¼‰
- `-a, --auth`ï¼šæ˜¾ç¤ºè®¤è¯å¤±è´¥çš„ IP
- `-n, --network`ï¼šæ˜¾ç¤ºç½‘ç»œé”™è¯¯çš„ IP
- `--pubkey`ï¼šå¯ç”¨å…¬é’¥ç™»å½•
- `-l, --loop`ï¼šå¾ªç¯æ£€ç´¢æ¨¡å¼

## äº¤äº’å¼ UI è¯´æ˜

é»˜è®¤æƒ…å†µä¸‹ï¼ŒSSH æ‰«æä½¿ç”¨ bubbletea æä¾›çš„äº¤äº’å¼ç•Œé¢ï¼š

- **æ‰«æåŠ¨ç”»**ï¼šæ˜¾ç¤ºæ—‹è½¬çš„æ‰«ææŒ‡ç¤ºå™¨å’Œè¿›åº¦ï¼ˆå·²æ‰«æ/æ€»æ•°ï¼‰
- **å®æ—¶ç»“æœ**ï¼š
  - âœ“ ç»¿è‰²æ˜¾ç¤ºæˆåŠŸç™»å½•çš„ä¸»æœº
  - âš  é»„è‰²æ˜¾ç¤ºè®¤è¯å¤±è´¥çš„ä¸»æœºï¼ˆéœ€è¦ `-a` å‚æ•°ï¼‰
  - âœ— çº¢è‰²æ˜¾ç¤ºç½‘ç»œé”™è¯¯çš„ä¸»æœºï¼ˆéœ€è¦ `-n` å‚æ•°ï¼‰
- **é€€å‡ºæ–¹å¼**ï¼šæŒ‰ `q` é”®æˆ– `Ctrl+C` é€€å‡ºæ‰«æ

## ç¤ºä¾‹

### æ‰«æå±€åŸŸç½‘ä¸­çš„ SSH æœåŠ¡

```bash
# æ‰«æ 192.168.3.1 åˆ° 192.168.3.254
./scanner ssh -p 3 -s 1 -e 254 -u root -P 123456
```

### æŸ¥çœ‹æ‰€æœ‰å¤±è´¥çš„è¿æ¥

```bash
# æ˜¾ç¤ºè®¤è¯å¤±è´¥å’Œç½‘ç»œé”™è¯¯çš„ä¸»æœº
./scanner ssh -a -n
```

### è·å– JSON æ ¼å¼ç»“æœ

```bash
# è¾“å‡º JSON æ ¼å¼ï¼Œæ–¹ä¾¿è„šæœ¬å¤„ç†
./scanner ssh --output-format json > result.json
```

## æ€§èƒ½

- é»˜è®¤å¹¶å‘æ•°ï¼š500 ä¸ª worker
- è¿æ¥è¶…æ—¶ï¼š500ms
- é€‚åˆå¿«é€Ÿæ‰«æå¤§é‡ IP

## æŠ€æœ¯æ ˆ

- [Cobra](https://github.com/spf13/cobra)ï¼šå‘½ä»¤è¡Œæ¡†æ¶
- [Bubbletea](https://github.com/charmbracelet/bubbletea)ï¼šç»ˆç«¯ UI æ¡†æ¶
- [Bubbles](https://github.com/charmbracelet/bubbles)ï¼šBubbletea ç»„ä»¶åº“
- [Lipgloss](https://github.com/charmbracelet/lipgloss)ï¼šç»ˆç«¯æ ·å¼åº“
- [golang.org/x/crypto/ssh](https://pkg.go.dev/golang.org/x/crypto/ssh)ï¼šSSH å®¢æˆ·ç«¯

## å…¶ä»–å‘½ä»¤

è¾“å…¥ `-h` æŸ¥çœ‹å®Œæ•´å¸®åŠ©ä¿¡æ¯ï¼š

```bash
./scanner -h
./scanner ssh -h
```
